{"version":3,"sources":["domino.js","dice.js","player.js","handlers.js","board.js","index.js"],"names":["Domino","props","class","current_score","value","onClick","handleDominoClick","getDominoValue","Dice","selected","selectable","handleDiceClick","Player","player_score","this","dominos","current_player","name","map","domino","index","React","Component","getRandomDice","Math","floor","random","nextPlayer","lstate","dices","Array","i","rdices","kdices","kept","players_number","v","state","computeApproxScore","pos","indexOf","splice","players","unshift","setState","forEach","player","computeExactScore","handleAbandon","length","push","sort","pop","isDiceSelectable","handleKeep","slice","handleRoll","computeTempScore","total","dice","valid","s","r","k","initial_dominos","dominos_value","Board","bind","disabled","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2261b49e.chunk.js","sourcesContent":["import { getDominoValue } from \"./board.js\"\n\nfunction Domino(props) {\n    return (\n        <button\n            class={'domino ' + (props.current_score === props.value ? \"domino_selectable \" : \"\")}\n            onClick={props.handleDominoClick}\n        >\n                {props.value} ({getDominoValue(props.value)})\n        </button>\n    );\n}\n\nexport default Domino;\n\n","export default Dice;\n\nfunction Dice(props) {\n    return (\n        <button \n            class={'dice dice' + (props.value) + ' ' + ( props.selected ? 'dice_selected ' : '') + ( props.selectable ? '' : 'dice_not_selectable')}\n            onClick={props.handleDiceClick}\n        />\n    );\n}","import React from 'react';\nimport Domino from './domino.js'\nimport { getDominoValue } from \"./board.js\"\n\nclass Player extends React.Component {\n    render() {\n\n        let player_score = 0\n        for (const d of this.props.dominos) {\n            player_score += getDominoValue(d)\n        }\n\n        return (\n            <div class={'player ' + (this.props.current_player ? \"player_active \" : \"\")}>\n                \n                {this.props.name} - {player_score}\n                {this.props.dominos.map((domino, index) => (\n                <Domino \n                    value={domino}\n                    handleDominoClick={this.props.handleDominoClick}\n                    current_score={((this.props.current_player) || (index !== 0)) ? 0: this.props.current_score}\n                    />\n                ))}\n            </div>\n        );\n    }\n}\n\nexport default Player;\n","\nexport function getRandomDice() {\n    return Math.floor(Math.random() * 6) + 1;\n}\n\nexport function nextPlayer(lstate) {\n\n    var dices = Array(8)\n    for(let i = 0 ; i < 8 ; i++) {\n        dices[i] = getRandomDice()\n    }\n\n    lstate.rdices = dices\n    lstate.kdices = Array(0)\n    lstate.selected = null\n    lstate.kept = false\n\n    lstate.current_player = (lstate.current_player + 1) % lstate.players_number\n\n    return lstate\n\n}\n\nexport function handleDominoClick(v) {\n\n    if (!this.state.kept) {\n        return\n    }\n\n    let lstate = this.state\n\n    if (v === computeApproxScore(this.state.kdices, this.state.dominos)) {\n        let pos = lstate.dominos.indexOf(v)\n        lstate.dominos.splice(pos, 1)\n        lstate.players[this.state.current_player].dominos.unshift(v)\n        lstate = nextPlayer(lstate)\n        this.setState(lstate)\n    }    \n    this.state.players.forEach((player, index) => {\n        if (index !== this.state.current_player) {\n            if ((v === player.dominos[0]) && (v === computeExactScore(this.state.kdices))) {\n                lstate.players[index].dominos.splice(0, 1)\n                lstate.players[this.state.current_player].dominos.unshift(v)\n                lstate = nextPlayer(lstate)\n                this.setState(lstate)\n            }\n        }\n    })\n}\n\nexport function handleAbandon() {\n\n    let lstate = this.state\n    let v = 0\n    \n    if (lstate.players[this.state.current_player].dominos.length !== 0) {\n        v = lstate.players[this.state.current_player].dominos[0]\n        lstate.players[this.state.current_player].dominos.splice(0, 1)\n        lstate.dominos.push(v)  \n        lstate.dominos.sort()  \n    }\n\n    if (v !== lstate.dominos[lstate.dominos.length - 1]) {\n        lstate.dominos.pop()\n    }\n\n    lstate = nextPlayer(lstate)\n    this.setState(lstate)\n\n\n}\n\nexport function handleDiceClick(v) {\n\n    if (!isDiceSelectable(v, this.state.kdices) )\n        return \n\n    let lstate = this.state\n    if (v === this.state.selected) {\n        lstate.selected = null\n    } else {\n        lstate.selected = v\n    }\n    this.setState(lstate)\n}\n\nexport function handleKeep() {\n    if (this.state.selected == null) {\n        return\n    }\n\n    for( let i = 0 ; i < this.state.kdices.length ; i++){ \n        if (this.state.selected === this.state.kdices[i]) {\n            return\n        }\n    }\n\n    var kdices = this.state.kdices.slice()\n    var rdices = []\n\n\n    for( let i = 0; i < this.state.rdices.length; i++){ \n                               \n        if ( this.state.rdices[i] === this.state.selected) { \n            kdices.push(this.state.rdices[i])\n        } else {\n            rdices.push(this.state.rdices[i])\n        }\n    }\n\n    let lstate = this.state\n    lstate.rdices = rdices\n    lstate.kdices = kdices\n    lstate.selected = null\n    lstate.kept = true\n    this.setState(lstate)\n}\n\nexport function handleRoll() {\n\n    var kdices = this.state.kdices.slice()\n    var rdices = []\n\n    for( let i = 0; i < this.state.rdices.length; i++){ \n        rdices.push(getRandomDice())\n    }\n    this.setState({rdices: rdices, kdices: kdices, selected: null, kept: false})\n}\n\nexport function computeTempScore(dices) {\n    var total = 0\n    for (let dice of dices) {\n        total += (dice < 5 ? dice : 5)\n    }\n    return total\n}\n\nexport function computeExactScore(dices) {\n    var total = 0\n    var valid = false\n    for (let dice of dices) {\n        total += (dice < 5 ? dice : 5)\n        if (dice > 5)\n            valid = true\n    }\n    if (valid)\n        return total\n    else\n        return 0\n}\n\nexport function computeApproxScore(dices, dominos) {\n    var s = computeExactScore(dices)\n    var r = 0\n    for ( let i = 0 ; i < dominos.length ; i++ ) {\n        if (dominos[i] <= s) {\n            r = dominos[i]\n        }\n    }\n    return r\n}\nexport function isDiceSelectable(v, k) {\n    for (let d of k) {\n        if (d === v)\n            return false\n    }\n    return true\n}\n","import React from 'react';\nimport Domino from './domino.js'\nimport Dice from './dice.js';\nimport Player from './player.js'\nimport { handleDiceClick } from './handlers.js';\nimport { handleDominoClick } from './handlers.js';\nimport { getRandomDice } from './handlers.js';\nimport { handleKeep } from './handlers.js';\nimport { handleRoll } from './handlers.js';\nimport { handleAbandon } from './handlers.js';\nimport { computeTempScore } from './handlers.js';\nimport { computeApproxScore } from './handlers.js';\nimport { computeExactScore } from './handlers.js';\nimport { isDiceSelectable } from './handlers.js';\n\nconst initial_dominos = \n    [ 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36 ]\n\nconst dominos_value = \n    [ 1, 1 , 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4 ]\n\nfunction getDominoValue(v) {\n    if (v < 21)\n        return 0\n    if (v > 36)\n        return 0\n    return dominos_value[v - 21]\n}\n   \nclass Board extends React.Component {\n\n    constructor(props) {\n\n        super(props)\n        var dices = Array(8)\n        for(let i = 0 ; i < 8 ; i++) {\n            dices[i] = getRandomDice()\n        }\n        this.state = {\n\n            // Dices\n            rdices: dices,\n            kdices: Array(0),\n\n            // Dices selection\n            selected: null,\n            kept: false,\n\n            // Dominos\n            dominos: initial_dominos,\n\n            // Players\n            players_number: 2,\n            current_player: 0,\n            players: [\n                {name: \"Florian\", dominos : Array(0)},\n                {name: \"AurÃ©lie\", dominos : Array(0)},\n            ]\n\n        }\n    }\n\n    render() {\n\n        return (\n            <div class='board'>\n                <div class='domino_container'>\n                    {this.state.dominos.map(domino => (\n                        <Domino \n                            value={domino}\n                            handleDominoClick={handleDominoClick.bind(this, domino)}\n                            current_score={this.state.kept ? computeApproxScore(this.state.kdices, this.state.dominos) : 0}\n                        />\n                    ))}               \n                </div>\n                <div class='dice_container'>\n                {this.state.rdices.map(dice => (\n                        <Dice \n                            value={dice}\n                            handleDiceClick={handleDiceClick.bind(this, dice)}\n                            selected={dice === this.state.selected}\n                            selectable={(isDiceSelectable(dice, this.state.kdices)) && (!this.state.kept)}\n                        />\n                ))}\n                </div>\n                <div class='dice_container'>\n                {this.state.kdices.map(dice => (\n                        <Dice \n                            value={dice}\n                            selectable={false}\n                        />\n                    ))} \n                </div>\n                <div class='cmd_container'>\n                    <button disabled={this.state.kept} onClick={handleKeep.bind(this)}>Garder</button>               \n                    <button disabled={!this.state.kept} onClick={handleRoll.bind(this)}>Relancer</button>               \n                    <button onClick={handleAbandon.bind(this)}>Abandonner</button>               \n                    Total : {computeTempScore(this.state.kdices)}               \n                </div>\n                <div class='players_container'>\n                {this.state.players.map((player, index) => (\n                        <Player \n                            name={player.name}\n                            dominos={player.dominos}\n                            handleDominoClick={handleDominoClick.bind(this, player.dominos[0])}\n                            current_player={index === this.state.current_player}\n                            current_score={this.state.kept ? computeExactScore(this.state.kdices) : 0}\n                        />\n                ))} \n                </div>\n            </div>\n        );\n    }\n}\n export default Board;\n export { getDominoValue }\n","import ReactDOM from 'react-dom';\nimport './index.css';\nimport Board from './board.js'\n\n  // ========================================\n  \n  ReactDOM.render(\n    <Board />,\n    document.getElementById('root')\n  );\n  "],"sourceRoot":""}